var on=require("../events/on"),clone=require("../util/clone"),attrState="data-pjax-state",linkAction=function(el,event){if(!isDefaultPrevented(event)){var options=clone(this.options),attrValue=checkIfShouldAbort(el,event);if(attrValue)el.setAttribute(attrState,attrValue);else{if(event.preventDefault(),this.options.currentUrlFullReload&&el.href===window.location.href.split("#")[0])return el.setAttribute(attrState,"reload"),void this.reload();el.setAttribute(attrState,"load"),options.triggerElement=el,this.loadUrl(el.href,options)}}};function checkIfShouldAbort(el,event){return event.which>1||event.metaKey||event.ctrlKey||event.shiftKey||event.altKey?"modifier":el.protocol!==window.location.protocol||el.host!==window.location.host?"external":el.hash&&el.href.replace(el.hash,"")===window.location.href.replace(location.hash,"")?"anchor":el.href===window.location.href.split("#")[0]+"#"?"anchor-empty":void 0}var isDefaultPrevented=function(event){return event.defaultPrevented||!1===event.returnValue};module.exports=function(el){var that=this;el.setAttribute(attrState,""),on(el,"click",(function(event){linkAction.call(that,el,event)})),on(el,"keyup",function(event){13===event.keyCode&&linkAction.call(that,el,event)}.bind(this))};